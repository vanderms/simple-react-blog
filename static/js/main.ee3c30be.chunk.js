(this["webpackJsonpsimple-react-blog"]=this["webpackJsonpsimple-react-blog"]||[]).push([[0],{14:function(e,t,n){e.exports={postPreview:"post-preview_postPreview__2-_ZC",title:"post-preview_title__rNNpa",content:"post-preview_content__2k3ZA"}},20:function(e,t,n){e.exports={form:"create-post_form__1IcsY",formFirstRow:"create-post_formFirstRow__2w1ak"}},30:function(e,t,n){},38:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),s=n(22),a=n.n(s),o=(n(30),n(8)),i=n(9),l=n.n(i),j=n(2),b=n(4),d=n(0);var u=function(){var e=Object(r.useState)(!1),t=Object(o.a)(e,2),n=t[0],c=t[1],s=Object(j.g)();return Object(r.useEffect)((function(){c(!1)}),[s]),Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("nav",{className:l.a.navbar,children:[Object(d.jsx)(b.b,{to:"/",children:Object(d.jsx)("h1",{className:l.a.title,children:"A Simple Blog"})}),Object(d.jsxs)("div",{className:l.a.links,children:[Object(d.jsx)(b.b,{to:"/",children:"Home"}),Object(d.jsx)(b.b,{to:"/create",children:"Novo Post"})]}),Object(d.jsx)("div",{className:l.a.menu,onClick:function(){return c(!0)},children:"\u2630"})]}),n&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("nav",{className:l.a.sidebar,children:[Object(d.jsx)(b.b,{to:"/",children:"Home"}),Object(d.jsx)(b.b,{to:"/create",children:"Novo Post"}),Object(d.jsx)("div",{className:l.a.closeButton,onClick:function(){return c(!1)},children:"\u2715"})]}),Object(d.jsx)("div",{className:l.a.backdrop,onClick:function(){return c(!1)}})]})]})},O=n(25),h=n(14),x=n.n(h);var p=function(e){var t=e.post;return Object(d.jsx)("div",{className:x.a.postPreview,children:Object(d.jsxs)(b.b,{to:"/posts/".concat(t.id),children:[Object(d.jsx)("h3",{className:x.a.title,children:t.title}),Object(d.jsxs)("small",{children:["Autor: ",t.author]}),Object(d.jsxs)("p",{className:x.a.content,children:[" ",t.body]})]})})},v=n(19),f=n.n(v),m=n(24);var g=function(e){e=Number.parseInt(e);var t="assets/db.json",n=Object(r.useState)(null),c=Object(o.a)(n,2),s=c[0],a=c[1],i=Object(r.useState)(!0),l=Object(o.a)(i,2),j=l[0],b=l[1],d=Object(r.useState)(null),u=Object(o.a)(d,2),O=u[0],h=u[1];return Object(r.useEffect)((function(){var n=new AbortController;function r(){return(r=Object(m.a)(f.a.mark((function r(){var c,s,o;return f.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,fetch(t,{signal:n.signal});case 3:if((c=r.sent).ok){r.next=6;break}throw Error("Failed to connect to the server.");case 6:return r.next=8,c.json();case 8:s=r.sent,window.localStorage.setItem("posts",JSON.stringify(s.posts)),e?(o=s.posts.filter((function(t){return t.id===e}))[0],a(o)):a(s.posts),b(!1),h(!1),r.next=18;break;case 15:r.prev=15,r.t0=r.catch(0),"AbortError"===r.t0.name?console.log("fetch aborted"):(b(!1),h(r.t0.message));case 18:case"end":return r.stop()}}),r,null,[[0,15]])})))).apply(this,arguments)}return null===window.localStorage.getItem("posts")?function(){r.apply(this,arguments)}():function(){var t=JSON.parse(localStorage.getItem("posts"));if(e){var n=t.filter((function(t){return t.id===e}))[0];a(n)}else a(t);b(!1),h(!1)}(),function(){return n.abort()}}),[e]),{data:s,isLoading:j,error:O}};var _=function(){var e=g(),t=e.data,n=e.isLoading,r=e.error;return Object(d.jsxs)("div",{className:"section-container",children:[r&&Object(d.jsx)("div",{children:r}),n&&Object(d.jsx)("div",{children:"Loading... "}),t&&Object(O.a)(t).reverse().map((function(e){return Object(d.jsx)(p,{post:e},e.id)}))]})},w=n(20),N=n.n(w);var S=function(){var e=Object(r.useState)(""),t=Object(o.a)(e,2),n=t[0],c=t[1],s=Object(r.useState)(""),a=Object(o.a)(s,2),i=a[0],l=a[1],b=Object(r.useState)(""),u=Object(o.a)(b,2),O=u[0],h=u[1],x=Object(r.useState)(!1),p=Object(o.a)(x,2),v=p[0],f=p[1],m=Object(j.f)();return Object(d.jsxs)("div",{className:"section-container",children:[Object(d.jsx)("h2",{children:"Write a new post"}),Object(d.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t={title:n,body:i,author:O};f(!0);var r=window.localStorage.getItem("posts");r=JSON.parse(r),t.id=r[r.length-1].id+1,r.push(t),window.localStorage.setItem("posts",JSON.stringify(r)),console.log("new post added"),f(!1),m.push("/")},className:N.a.form,children:[Object(d.jsxs)("div",{className:N.a.formFirstRow,children:[Object(d.jsxs)("div",{children:[Object(d.jsx)("label",{htmlFor:"title",children:"Title: "}),Object(d.jsx)("input",{type:"text",id:"title",value:n,onChange:function(e){return c(e.target.value)},required:!0})]}),Object(d.jsxs)("div",{children:[Object(d.jsx)("label",{htmlFor:"author",children:"Author: "}),Object(d.jsx)("input",{type:"text",id:"author",value:O,onChange:function(e){return h(e.target.value)},required:!0})]})]}),Object(d.jsxs)("label",{htmlFor:"content",children:["Content:",Object(d.jsx)("textarea",{id:"content",cols:"30",rows:"10",value:i,onChange:function(e){return l(e.target.value)},required:!0})]}),v?Object(d.jsx)("button",{disabled:!0,children:"..."}):Object(d.jsx)("button",{children:"Publicar"})]})]})};function k(){var e=Object(j.h)().id,t=g(e),n=t.data,r=t.error,c=t.isLoading,s=Object(j.f)();return Object(d.jsxs)("div",{className:"blog-details section-container",children:[c&&Object(d.jsx)("div",{children:"Loading..."}),r&&Object(d.jsx)("div",{children:r}),n&&Object(d.jsxs)("article",{children:[Object(d.jsx)("h2",{children:n.title}),Object(d.jsx)("p",{children:Object(d.jsxs)("small",{children:["Autor: ",n.author," "]})}),Object(d.jsx)("div",{children:n.body}),Object(d.jsx)("button",{onClick:function(){return function(e){var t=window.localStorage.getItem("posts");t=(t=JSON.parse(t)).filter((function(t){return t.id!==e})),window.localStorage.setItem("posts",JSON.stringify(t)),s.push("/")}(n.id)},className:"remove-button",children:"Remover"})]})]})}function y(){return Object(d.jsxs)("div",{class:"section-container",children:[Object(d.jsx)("h2",{children:"Ops..."}),Object(d.jsx)("p",{children:"A p\xe1gina que voc\xea procura n\xe3o foi encontrada."}),Object(d.jsx)(b.b,{to:"/",children:"Voltar para a homepage"})]})}function C(){return Object(d.jsx)("footer",{className:"section-container",children:Object(d.jsxs)("small",{children:["\xa9 2021 - ",(new Date).getFullYear()," vanderms.Todos os direitos reservados."]})})}var A=function(){return Object(d.jsxs)(b.a,{children:[Object(d.jsxs)("div",{className:"App",children:[Object(d.jsx)(u,{}),Object(d.jsx)("main",{children:Object(d.jsxs)(j.c,{children:[Object(d.jsx)(j.a,{exact:!0,path:"/",children:Object(d.jsx)(_,{})}),Object(d.jsx)(j.a,{path:"/create",children:Object(d.jsx)(S,{})}),Object(d.jsx)(j.a,{path:"/posts/:id",children:Object(d.jsx)(k,{})}),Object(d.jsx)(j.a,{path:"*",children:Object(d.jsx)(y,{})})]})})]}),Object(d.jsx)(C,{})]})};a.a.render(Object(d.jsx)(c.a.StrictMode,{children:Object(d.jsx)(A,{})}),document.getElementById("root"))},9:function(e,t,n){e.exports={navbar:"navbar_navbar__2UZ5p",title:"navbar_title__n47LR",links:"navbar_links__1R09e",menu:"navbar_menu__1UcCx",closeButton:"navbar_closeButton__3wlhf",sidebar:"navbar_sidebar__3LpAa",backdrop:"navbar_backdrop__qdJUX"}}},[[38,1,2]]]);
//# sourceMappingURL=main.ee3c30be.chunk.js.map